import React, { useEffect } from 'react';
import { Player } from 'video-react';

const getJSONData = function(path) {
    useEffect(() => {
        fetch(path)
            .then(res => res.json())
            .then(data => setData(data))
    }, []);
    return data;
}

const AutoplayRecs = function() { 
    

    const recsJSONData = getJSONData("/recs");
    const tracksArray = recsJSONData.tracks;
    const artistsString = "";
    track.artists.forEach((artist) => {
        artistsString += `${artist.name} `;
    });
    const previewItems = tracksArray.map(track => 
        <li key={track.id}>
            <p>
                {'title: ' + track.name + ' artists: ' + artistsString} 
            </p>
            <Player>
                playsInline
                src=`${track.preview_url}`;
                autoPlay
                loop
                muted
            </Player>
        </li>)
    return (
        <>
            <ul>
                {previewItems}
            </ul>
        </>
    );
};

export default AutoplayRecs;